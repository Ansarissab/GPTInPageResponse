<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>AI Assistant Settings</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      width: 400px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: white;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      text-align: center;
    }

    .header h1 {
      font-size: 18px;
      margin-bottom: 5px;
    }

    .header p {
      font-size: 12px;
      opacity: 0.9;
    }

    .content {
      padding: 20px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 8px;
      color: #374151;
    }

    .form-group select,
    .form-group input {
      width: 100%;
      padding: 10px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 13px;
      font-family: inherit;
    }

    .form-group select:focus,
    .form-group input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .form-group small {
      display: block;
      margin-top: 5px;
      font-size: 11px;
      color: #6b7280;
    }

    .form-group a {
      color: #667eea;
      text-decoration: none;
    }

    .form-group a:hover {
      text-decoration: underline;
    }

    .btn {
      width: 100%;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 12px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      margin-bottom: 10px;
    }

    .btn:hover {
      background: #5a67d8;
      transform: translateY(-1px);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn:disabled {
      background: #9ca3af;
      cursor: not-allowed;
      transform: none;
    }

    .btn-secondary {
      background: #10b981;
    }

    .btn-secondary:hover {
      background: #059669;
    }

    .status {
      padding: 12px;
      border-radius: 6px;
      font-size: 12px;
      margin-bottom: 15px;
      display: none;
    }

    .status.success {
      background: #d1fae5;
      color: #065f46;
      border: 1px solid #6ee7b7;
      display: block;
    }

    .status.error {
      background: #fee2e2;
      color: #991b1b;
      border: 1px solid #fca5a5;
      display: block;
    }

    .status.info {
      background: #dbeafe;
      color: #1e40af;
      border: 1px solid #93c5fd;
      display: block;
    }

    .divider {
      height: 1px;
      background: #e5e7eb;
      margin: 20px 0;
    }

    .info-box {
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      padding: 12px;
      margin-bottom: 20px;
    }

    .info-box h3 {
      font-size: 13px;
      margin-bottom: 8px;
      color: #374151;
    }

    .info-box ul {
      margin-left: 20px;
      font-size: 12px;
      color: #6b7280;
    }

    .info-box li {
      margin-bottom: 5px;
    }

    .model-info {
      font-size: 11px;
      color: #6b7280;
      font-style: italic;
      margin-top: 5px;
    }
  </style>
</head>

<body>
  <div class="header">
    <h1>ü§ñ AI Quick Assistant</h1>
    <p>Configure your AI provider</p>
  </div>

  <div class="content">
    <div id="status" class="status"></div>

    <div class="form-group">
      <label for="provider">AI Provider</label>
      <select id="provider">
        <option value="openai">OpenAI</option>
        <option value="anthropic">Anthropic (Claude)</option>
        <option value="groq">Groq (Free, Fast)</option>
        <option value="google">Google (Gemini)</option>
        <option value="openrouter">OpenRouter (Multi-Model)</option>
      </select>
    </div>

    <div class="form-group">
      <label for="model">Model</label>
      <select id="model">
        <!-- Populated dynamically -->
      </select>
      <div class="model-info" id="model-info"></div>
    </div>

    <div class="form-group">
      <label for="apiKey">API Key</label>
      <input type="password" id="apiKey" placeholder="Enter your API key">
      <small>Get your API key: <a href="#" id="apiKeyLink" target="_blank">Provider website</a></small>
    </div>

    <button class="btn btn-secondary" id="testBtn">Test API Connection</button>
    <button class="btn" id="saveBtn">Save Settings</button>

    <div class="divider"></div>

    <details class="prompt-settings">
      <summary style="cursor: pointer; font-weight: 600; font-size: 13px; margin-bottom: 10px; color: #374151;">
        ‚öôÔ∏è Customize Prompts (Optional)
      </summary>

      <div class="info-box" style="margin-bottom: 15px; background: #eff6ff; border-color: #bfdbfe;">
        <p style="font-size: 11px; margin: 0; color: #1e40af;">
          Use <code>{selectedText}</code> as a placeholder for the selected text
        </p>
      </div>

      <div class="form-group">
        <label for="promptSummarize">Summarize Prompt:</label>
        <textarea id="promptSummarize" rows="4"
          style="width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 12px; font-family: monospace; resize: vertical;"
          placeholder="Leave empty to use default"></textarea>
      </div>

      <div class="form-group">
        <label for="promptReply">Reply Prompt:</label>
        <textarea id="promptReply" rows="4"
          style="width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 12px; font-family: monospace; resize: vertical;"
          placeholder="Leave empty to use default"></textarea>
      </div>

      <div class="form-group">
        <label for="promptComment">Comment Prompt:</label>
        <textarea id="promptComment" rows="4"
          style="width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 12px; font-family: monospace; resize: vertical;"
          placeholder="Leave empty to use default"></textarea>
      </div>

      <button class="btn btn-secondary" id="resetPromptsBtn"
        style="background: #6b7280; font-size: 12px; padding: 8px;">Reset to Defaults</button>
    </details>

    <div class="divider"></div>

    <div class="info-box" style="background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); border-color: #93c5fd;">
      <h3 style="margin: 0 0 10px 0; font-size: 14px; color: #1e40af; display: flex; align-items: center; gap: 8px;">
        ‚å®Ô∏è Keyboard Shortcuts
      </h3>
      <div style="display: grid; gap: 8px; font-size: 12px;">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <span style="color: #374151;">Summarize selected text</span>
          <kbd
            style="background: #fff; border: 1px solid #d1d5db; border-radius: 4px; padding: 4px 8px; font-family: monospace; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">Alt+Shift+S</kbd>
        </div>
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <span style="color: #374151;">Generate reply</span>
          <kbd
            style="background: #fff; border: 1px solid #d1d5db; border-radius: 4px; padding: 4px 8px; font-family: monospace; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">Alt+Shift+R</kbd>
        </div>
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <span style="color: #374151;">Generate comment</span>
          <kbd
            style="background: #fff; border: 1px solid #d1d5db; border-radius: 4px; padding: 4px 8px; font-family: monospace; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">Alt+Shift+C</kbd>
        </div>
      </div>
      <p style="margin: 10px 0 0 0; font-size: 11px; color: #6b7280;">
        üí° Tip: Select text first, then press the shortcut for instant AI assistance!
      </p>
    </div>

    <div class="divider"></div>

    <div class="info-box" style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-color: #fbbf24;">
      <h3 style="margin: 0 0 10px 0; font-size: 14px; color: #92400e; display: flex; align-items: center; gap: 8px;">
        üìú Response History
      </h3>
      <p style="margin: 0 0 12px 0; font-size: 13px; color: #78350f;">
        View all your AI-generated responses with details about what was generated, when, and which model was used.
      </p>
      <a href="history.html" target="_blank"
        style="display: inline-block; padding: 8px 16px; background: #10a37f; color: white; text-decoration: none; border-radius: 6px; font-size: 13px; font-weight: 500;">
        Open History ‚Üí
      </a>
    </div>

    <div class="divider"></div>

    <div class="info-box">
      <h3>How to use:</h3>
      <ul>
        <li>Select text on any webpage</li>
        <li>Right-click ‚Üí Choose AI action</li>
        <li>Response auto-copies to clipboard</li>
      </ul>
    </div>

    <div class="info-box">
      <h3>Recommended for free tier:</h3>
      <ul>
        <li><strong>Groq</strong> - Fast and free (best option)</li>
        <li><strong>OpenAI</strong> - gpt-4o-mini (very cheap)</li>
        <li><strong>Google</strong> - Gemini Flash (free tier)</li>
      </ul>
    </div>
  </div>

  <script src="settings.js"></script>
</body>

</html>